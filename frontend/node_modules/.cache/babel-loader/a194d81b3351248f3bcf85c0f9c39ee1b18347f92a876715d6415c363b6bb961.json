{"ast":null,"code":"import _toConsumableArray from\"/root/Projects/linecheck/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/root/Projects/linecheck/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// RegionSelector.js\nimport React,{useState}from\"react\";import ImageDisplay from\"./ImageDisplay\";import{useNavigate}from\"react-router-dom\";import{useParams}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RegionSelector=function RegionSelector(_ref){var firstFrameUrl=_ref.firstFrameUrl,handleGridSelection=_ref.handleGridSelection;var navigate=useNavigate();var _useParams=useParams(),videoId=_useParams.videoId;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),selectedSquaresStack=_useState2[0],setSelectedSquaresStack=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),selectedSquaresOpponent=_useState4[0],setSelectedSquaresOpponent=_useState4[1];var _useState5=useState(\"Stack\"),_useState6=_slicedToArray(_useState5,2),currentMode=_useState6[0],setCurrentMode=_useState6[1];// Initial mode is \"Stack\"\nvar handleSquareClick=function handleSquareClick(squareIndex){if(currentMode===\"Stack\"){if(selectedSquaresStack.includes(squareIndex)){setSelectedSquaresStack(selectedSquaresStack.filter(function(index){return index!==squareIndex;}));}else{setSelectedSquaresStack([].concat(_toConsumableArray(selectedSquaresStack),[squareIndex]));}}else if(currentMode===\"Opponent\"){if(selectedSquaresOpponent.includes(squareIndex)){setSelectedSquaresOpponent(selectedSquaresOpponent.filter(function(index){return index!==squareIndex;}));}else{setSelectedSquaresOpponent([].concat(_toConsumableArray(selectedSquaresOpponent),[squareIndex]));}}};var handleClear=function handleClear(){if(currentMode===\"Stack\"){setSelectedSquaresStack([]);}else if(currentMode===\"Opponent\"){setSelectedSquaresOpponent([]);}};var handleSubmit=function handleSubmit(){// Combine the selected squares from both modes into a data structure that the backend expects\nvar selectedSquares=[].concat(_toConsumableArray(selectedSquaresStack.map(function(index){return{index:index,type:\"Stack\"};})),_toConsumableArray(selectedSquaresOpponent.map(function(index){return{index:index,type:\"Opponent\"};})));console.log(selectedSquares);if(selectedSquares.length>0){handleGridSelection(selectedSquares,currentMode);// Pass mode to the handler\nnavigate(\"/data/\".concat(videoId));}else{alert('Please select at least one square.');}};var handleModeChange=function handleModeChange(mode){setCurrentMode(mode);};return/*#__PURE__*/_jsxs(\"div\",{className:\"region-selector\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Select Regions\"}),/*#__PURE__*/_jsx(\"div\",{className:\"prompt\",children:currentMode===\"Stack\"?\"Select Stack\":\"Select Opponent\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleModeChange(\"Stack\");},children:\"Select Stack\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleModeChange(\"Opponent\");},children:\"Select Opponent\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleClear,children:\"Clear\"}),/*#__PURE__*/_jsx(ImageDisplay,{firstFrameUrl:firstFrameUrl,selectedSquares:currentMode===\"Stack\"?selectedSquaresStack:selectedSquaresOpponent,onSquareClick:handleSquareClick,currentMode:currentMode}),/*#__PURE__*/_jsx(\"button\",{className:\"submit-button\",disabled:currentMode===\"Stack\"&&selectedSquaresStack.length===0||currentMode===\"Opponent\"&&selectedSquaresOpponent.length===0,onClick:handleSubmit,children:\"Submit\"})]});};export default RegionSelector;","map":{"version":3,"names":["React","useState","ImageDisplay","useNavigate","useParams","jsx","_jsx","jsxs","_jsxs","RegionSelector","_ref","firstFrameUrl","handleGridSelection","navigate","_useParams","videoId","_useState","_useState2","_slicedToArray","selectedSquaresStack","setSelectedSquaresStack","_useState3","_useState4","selectedSquaresOpponent","setSelectedSquaresOpponent","_useState5","_useState6","currentMode","setCurrentMode","handleSquareClick","squareIndex","includes","filter","index","concat","_toConsumableArray","handleClear","handleSubmit","selectedSquares","map","type","console","log","length","alert","handleModeChange","mode","className","children","onClick","onSquareClick","disabled"],"sources":["/root/Projects/linecheck/frontend/src/components/RegionSelector.js"],"sourcesContent":["// RegionSelector.js\nimport React, { useState } from \"react\";\nimport ImageDisplay from \"./ImageDisplay\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useParams } from \"react-router-dom\";\n\nconst RegionSelector = ({ firstFrameUrl, handleGridSelection }) => {\n  const navigate = useNavigate();\n\n  const { videoId } = useParams();\n\n  const [selectedSquaresStack, setSelectedSquaresStack] = useState([]);\n  const [selectedSquaresOpponent, setSelectedSquaresOpponent] = useState([]);\n  const [currentMode, setCurrentMode] = useState(\"Stack\"); // Initial mode is \"Stack\"\n\n  const handleSquareClick = (squareIndex) => {\n    if (currentMode === \"Stack\") {\n      if (selectedSquaresStack.includes(squareIndex)) {\n        setSelectedSquaresStack(selectedSquaresStack.filter(index => index !== squareIndex));\n      } else {\n        setSelectedSquaresStack([...selectedSquaresStack, squareIndex]);\n      }\n    } else if (currentMode === \"Opponent\") {\n      if (selectedSquaresOpponent.includes(squareIndex)) {\n        setSelectedSquaresOpponent(selectedSquaresOpponent.filter(index => index !== squareIndex));\n      } else {\n        setSelectedSquaresOpponent([...selectedSquaresOpponent, squareIndex]);\n      }\n    }\n  };\n\n  const handleClear = () => {\n    if (currentMode === \"Stack\") {\n      setSelectedSquaresStack([]);\n    } else if (currentMode === \"Opponent\") {\n      setSelectedSquaresOpponent([]);\n    }\n  };\n\n  const handleSubmit = () => {\n    // Combine the selected squares from both modes into a data structure that the backend expects\n    const selectedSquares = [\n      ...selectedSquaresStack.map(index => ({ index, type: \"Stack\" })),\n      ...selectedSquaresOpponent.map(index => ({ index, type: \"Opponent\" }))\n    ];\n\n    console.log(selectedSquares);    \n\n    if (selectedSquares.length > 0) {\n      handleGridSelection(selectedSquares, currentMode); // Pass mode to the handler\n      navigate(`/data/${videoId}`);\n    } else {\n      alert('Please select at least one square.');\n    }\n  };\n\n  const handleModeChange = (mode) => {\n    setCurrentMode(mode);\n  };\n\n  return (\n    <div className=\"region-selector\">\n      <h3>Select Regions</h3>\n      <div className=\"prompt\">\n        {currentMode === \"Stack\" ? \"Select Stack\" : \"Select Opponent\"}\n      </div>\n      <button onClick={() => handleModeChange(\"Stack\")}>Select Stack</button>\n      <button onClick={() => handleModeChange(\"Opponent\")}>Select Opponent</button>\n      <button onClick={handleClear}>Clear</button>\n      <ImageDisplay\n        firstFrameUrl={firstFrameUrl}\n        selectedSquares={\n          currentMode === \"Stack\" ? selectedSquaresStack : selectedSquaresOpponent\n        }\n        onSquareClick={handleSquareClick}\n        currentMode={currentMode}\n      />\n      <button\n        className=\"submit-button\"\n        disabled={\n          (currentMode === \"Stack\" && selectedSquaresStack.length === 0) ||\n          (currentMode === \"Opponent\" && selectedSquaresOpponent.length === 0)\n        }\n        onClick={handleSubmit}\n      >\n        Submit\n      </button>\n    </div>\n  );\n};\n\nexport default RegionSelector;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}