{"ast":null,"code":"var _jsxFileName = \"/root/Projects/linecheck/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport VideoUploadComponent from \"./components/VideoUploadComponent\";\nimport VideoPreviewComponent from \"./components/VideoPreviewComponent\";\nimport GridSelectionComponent from \"./components/GridSelectionComponent\";\nimport ColorSelectionComponent from \"./components/ColorSelectionComponent\";\nimport SubmitButton from \"./components/SubmitButton\";\nimport ProcessingFeedbackComponent from \"./components/ProcessingFeedbackComponent\";\nimport DataDisplayComponent from \"./components/DataDisplayComponent\";\nimport MultipleSelectionSupport from \"./components/MultipleSelectionSupport\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [videoURL, setVideoURL] = useState(null);\n  const [selectedCells, setSelectedCells] = useState([]);\n  const [selectedColor, setSelectedColor] = useState(\"red\");\n  const [processing, setProcessing] = useState(false);\n  const [processedData, setProcessedData] = useState(null);\n  const [multipleSelection, setMultipleSelection] = useState(false);\n  const [processedFramePath, setProcessedFramePath] = useState(null);\n\n  // Fetch processed frame image when videoURL changes\n  useEffect(() => {\n    if (videoURL) {\n      fetchProcessedFrameImage();\n    }\n  }, [videoURL]);\n\n  // Fetch processed frame image from the backend\n  const fetchProcessedFrameImage = async () => {\n    try {\n      const response = await fetch(`http://localhost:5000/processed_videos/${videoURL}`, {\n        method: \"GET\"\n      });\n      if (response.ok) {\n        const processedFrameURL = URL.createObjectURL(await response.blob());\n        setProcessedFramePath(processedFrameURL);\n      } else {\n        console.error(\"Failed to fetch processed frame image.\");\n      }\n    } catch (error) {\n      console.error(\"Error fetching processed frame image:\", error);\n    }\n  };\n  const handleVideoUpload = async videoURL => {\n    setVideoURL(videoURL);\n  };\n  const handleCellClick = cell => {\n    if (multipleSelection) {\n      if (selectedCells.includes(cell)) {\n        setSelectedCells(selectedCells.filter(c => c !== cell));\n      } else {\n        setSelectedCells([...selectedCells, cell]);\n      }\n    } else {\n      setSelectedCells([cell]);\n    }\n  };\n  const handleSelectColor = color => {\n    setSelectedColor(color);\n  };\n  const handleProcessClick = () => {\n    setProcessing(true);\n    setProcessedData(null);\n    fetch(\"http://localhost:5000/process\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        videoURL,\n        selectedCells,\n        selectedColor\n      })\n    }).then(response => response.json()).then(data => {\n      setProcessing(false);\n      setProcessedData(data);\n\n      // Only set processedFramePath if processing is successful\n      if (data.success) {\n        setProcessedFramePath(data.processed_frame_path);\n      }\n    });\n  };\n  const handleToggleMultipleSelection = () => {\n    setMultipleSelection(!multipleSelection);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Video Processing App\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(VideoUploadComponent, {\n      onVideoUpload: handleVideoUpload\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(VideoPreviewComponent, {\n      videoURL: videoURL,\n      processedFramePath: processedFramePath\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"kzWEzApByCcG18kWbBcz1S1YyOg=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","VideoUploadComponent","VideoPreviewComponent","GridSelectionComponent","ColorSelectionComponent","SubmitButton","ProcessingFeedbackComponent","DataDisplayComponent","MultipleSelectionSupport","jsxDEV","_jsxDEV","App","_s","videoURL","setVideoURL","selectedCells","setSelectedCells","selectedColor","setSelectedColor","processing","setProcessing","processedData","setProcessedData","multipleSelection","setMultipleSelection","processedFramePath","setProcessedFramePath","fetchProcessedFrameImage","response","fetch","method","ok","processedFrameURL","URL","createObjectURL","blob","console","error","handleVideoUpload","handleCellClick","cell","includes","filter","c","handleSelectColor","color","handleProcessClick","headers","body","JSON","stringify","then","json","data","success","processed_frame_path","handleToggleMultipleSelection","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onVideoUpload","_c","$RefreshReg$"],"sources":["/root/Projects/linecheck/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport VideoUploadComponent from \"./components/VideoUploadComponent\";\nimport VideoPreviewComponent from \"./components/VideoPreviewComponent\";\nimport GridSelectionComponent from \"./components/GridSelectionComponent\";\nimport ColorSelectionComponent from \"./components/ColorSelectionComponent\";\nimport SubmitButton from \"./components/SubmitButton\";\nimport ProcessingFeedbackComponent from \"./components/ProcessingFeedbackComponent\";\nimport DataDisplayComponent from \"./components/DataDisplayComponent\";\nimport MultipleSelectionSupport from \"./components/MultipleSelectionSupport\";\n\nfunction App() {\n  const [videoURL, setVideoURL] = useState(null);\n  const [selectedCells, setSelectedCells] = useState([]);\n  const [selectedColor, setSelectedColor] = useState(\"red\");\n  const [processing, setProcessing] = useState(false);\n  const [processedData, setProcessedData] = useState(null);\n  const [multipleSelection, setMultipleSelection] = useState(false);\n  const [processedFramePath, setProcessedFramePath] = useState(null);\n\n  // Fetch processed frame image when videoURL changes\n  useEffect(() => {\n    if (videoURL) {\n      fetchProcessedFrameImage();\n    }\n  }, [videoURL]);\n\n  // Fetch processed frame image from the backend\n  const fetchProcessedFrameImage = async () => {\n    try {\n      const response = await fetch(\n        `http://localhost:5000/processed_videos/${videoURL}`,\n        {\n          method: \"GET\",\n        }\n      );\n\n      if (response.ok) {\n        const processedFrameURL = URL.createObjectURL(await response.blob());\n        setProcessedFramePath(processedFrameURL);\n      } else {\n        console.error(\"Failed to fetch processed frame image.\");\n      }\n    } catch (error) {\n      console.error(\"Error fetching processed frame image:\", error);\n    }\n  };\n\n  const handleVideoUpload = async (videoURL) => {\n    setVideoURL(videoURL);\n  };\n\n  const handleCellClick = (cell) => {\n    if (multipleSelection) {\n      if (selectedCells.includes(cell)) {\n        setSelectedCells(selectedCells.filter((c) => c !== cell));\n      } else {\n        setSelectedCells([...selectedCells, cell]);\n      }\n    } else {\n      setSelectedCells([cell]);\n    }\n  };\n\n  const handleSelectColor = (color) => {\n    setSelectedColor(color);\n  };\n\n  const handleProcessClick = () => {\n    setProcessing(true);\n    setProcessedData(null);\n\n    fetch(\"http://localhost:5000/process\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        videoURL,\n        selectedCells,\n        selectedColor,\n      }),\n    })\n      .then((response) => response.json())\n      .then((data) => {\n        setProcessing(false);\n        setProcessedData(data);\n\n        // Only set processedFramePath if processing is successful\n        if (data.success) {\n          setProcessedFramePath(data.processed_frame_path);\n        }\n      });\n  };\n\n  const handleToggleMultipleSelection = () => {\n    setMultipleSelection(!multipleSelection);\n  };\n\n  return (\n    <div className=\"App\">\n      <h1>Video Processing App</h1>\n\n      {/* Video upload component */}\n      <VideoUploadComponent onVideoUpload={handleVideoUpload} />\n\n      {/* Video preview component */}\n      <VideoPreviewComponent\n        videoURL={videoURL}\n        processedFramePath={processedFramePath}\n      />\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}